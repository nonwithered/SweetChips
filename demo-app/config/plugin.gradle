if (gradle.ext.existsBuildTarget('plugin-gradle-android')) {
    apply plugin: 'SweetChips-android'
    SweetChips {
        asmApi = 5 << 16
        addTransform 'mainappA', incremental: false
        addTransform 'mainappB', incremental: true
        addTransform 'mainappC'
        addTransform 'mainappD'
    }
    mainappA {
        transform {
            first adapt('org.sweetchips.visitors.HideTransformClassNode')
            first adapt('org.sweetchips.visitors.UncheckcastTransformClassNode')
        }
        prepare {
            before {
                println 'before'
            }
            after {
                println 'after'
            }
        }
        transform {
            before {
                println 'before'
            }
            after {
                println 'after'
            }
        }
    }
    if (gradle.ext.existsBuildTarget('trace-weaver')) {
        apply plugin: 'TraceWeaver'
        TraceWeaver {
            attach 'mainappB'
            maxDepth 10
            ignore '*'
            notice 'org.sweetchips.demo.main.TestTrace'
            sectionName { classInfo, methodInfo ->
                classInfo.name.replaceAll('/', '.') + '#' + methodInfo.name
            }
        }
    }
    if (gradle.ext.existsBuildTarget('const-sweeper')) {
        apply plugin: 'ConstSweeper'
        ConstSweeper {
            attach 'mainappB'
            ignore 'org.sweetchips.demo.main.TestConst$CheckInternal'
            notice 'org.sweetchips.demo.main.TestConst$CheckInternal#sNotice'
        }
    }
    if (gradle.ext.existsBuildTarget('recursive-tail')) {
        apply plugin: 'RecursiveTail'
        RecursiveTail {
            attach 'mainappB'
            ignore '*'
            notice 'org.sweetchips.demo.main.TestTail#recursive'
        }
    }
    if (gradle.ext.existsBuildTarget('inline-tailor')) {
        apply plugin: 'InlineTailor'
        InlineTailor {
            attach 'mainappC'
        }
    }
}