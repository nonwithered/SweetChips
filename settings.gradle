import java.nio.file.Files

rootProject.name = 'SweetChips'

include ':test'
include ':demo'
include ':plugin4gradle'
include ':transform-launcher'
include ':shared'
include ':visitors'
include ':package-renamer'
include ':const-sweeper'
include ':trace-weaver'
include ':inline-tailor'

gradle.ext.buildUri = uri('./build')

gradle.ext.applyPlugin4Gradle = {
    Files.exists(rootProject.projectDir.toPath()
            .resolve('build')
            .resolve('org')
            .resolve('sweetchips')
            .resolve('plugin4gradle')
            .resolve('1.0.0')
            .resolve('plugin4gradle-1.0.0.pom')
    )
}

gradle.ext.applyVisitors = {
    Files.exists(rootProject.projectDir.toPath()
            .resolve('build')
            .resolve('org')
            .resolve('sweetchips')
            .resolve('visitors')
            .resolve('1.0.0')
            .resolve('visitors-1.0.0.pom')
    )
}

gradle.ext.applyTraceWeaver = {
    Files.exists(rootProject.projectDir.toPath()
            .resolve('build')
            .resolve('org')
            .resolve('sweetchips')
            .resolve('trace-weaver')
            .resolve('1.0.0')
            .resolve('trace-weaver-1.0.0.pom')
    )
}

gradle.ext.applyConstSweeper = {
    Files.exists(rootProject.projectDir.toPath()
            .resolve('build')
            .resolve('org')
            .resolve('sweetchips')
            .resolve('const-sweeper')
            .resolve('1.0.0')
            .resolve('const-sweeper-1.0.0.pom')
    )
}

gradle.ext.applyInlineTailor = {
    Files.exists(rootProject.projectDir.toPath()
            .resolve('build')
            .resolve('org')
            .resolve('sweetchips')
            .resolve('inline-tailor')
            .resolve('1.0.0')
            .resolve('inline-tailor-1.0.0.pom')
    )
}

gradle.ext.VERSION_GRADLE = '3.1.4'
gradle.ext.VERSION_ASM = '5.1'

apply from: 'scripts/librarys.groovy'
include ':utility'
include ':foundation'
include ':common-jvm'
include ':foundation-api'
include ':common-jvm-api'
include ':plugin-gradle-android'
include ':plugin-gradle-android-api'
